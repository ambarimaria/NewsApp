@model NewsApp.Models.ViewModels.PaginationInfo
@{
    var routeValues = ViewData["PaginationRouteValues"] as Dictionary<string, string?> ?? new();
    var action      = ViewData["PaginationAction"]?.ToString() ?? "Index";
    var controller  = ViewData["PaginationController"]?.ToString() ?? "News";
    int winStart    = Math.Max(1, Model.CurrentPage - 2);
    int winEnd      = Math.Min(Model.TotalPages, Model.CurrentPage + 2);
}

@if (Model.TotalPages > 1)
{
    <div class="pagination-wrap">
        <nav class="pagination-custom" aria-label="Page navigation">

            @* First *@
            @if (Model.CurrentPage > 3)
            {
                var rv = new Dictionary<string, string?>(routeValues) { ["page"] = "1" };
                <a class="pg-btn pg-arrow" asp-controller="@controller" asp-action="@action"
                   asp-all-route-data="@rv" title="First page">
                    <i class="fas fa-angles-left"></i>
                </a>
            }

            @* Prev *@
            @if (Model.HasPrevious)
            {
                var rv = new Dictionary<string, string?>(routeValues) { ["page"] = (Model.CurrentPage - 1).ToString() };
                <a class="pg-btn pg-arrow" asp-controller="@controller" asp-action="@action"
                   asp-all-route-data="@rv" title="Previous">
                    <i class="fas fa-chevron-left"></i>
                </a>
            }

            @* Page numbers *@
            @for (int p = winStart; p <= winEnd; p++)
            {
                var rv = new Dictionary<string, string?>(routeValues) { ["page"] = p.ToString() };
                <a class="pg-btn @(p == Model.CurrentPage ? "active" : "")"
                   asp-controller="@controller" asp-action="@action"
                   asp-all-route-data="@rv">@p</a>
            }

            @* Next *@
            @if (Model.HasNext)
            {
                var rv = new Dictionary<string, string?>(routeValues) { ["page"] = (Model.CurrentPage + 1).ToString() };
                <a class="pg-btn pg-arrow" asp-controller="@controller" asp-action="@action"
                   asp-all-route-data="@rv" title="Next">
                    <i class="fas fa-chevron-right"></i>
                </a>
            }

            @* Last *@
            @if (Model.CurrentPage < Model.TotalPages - 2)
            {
                var rv = new Dictionary<string, string?>(routeValues) { ["page"] = Model.TotalPages.ToString() };
                <a class="pg-btn pg-arrow" asp-controller="@controller" asp-action="@action"
                   asp-all-route-data="@rv" title="Last page">
                    <i class="fas fa-angles-right"></i>
                </a>
            }
        </nav>

        <p class="pagination-info">
            @Model.StartIndex–@Model.EndIndex of @Model.TotalResults.ToString("N0") articles
        </p>
    </div>
}

